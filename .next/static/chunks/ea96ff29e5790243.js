(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78583,e=>{"use strict";let t=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},12012,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},33565,e=>{"use strict";var t=e.i(46349);e.s(["ChevronRightIcon",()=>t.default])},96626,e=>{"use strict";var t=e.i(71645),a=e.i(20783),s=e.i(34620),r=e=>{var r;let i,o,{present:d,children:l}=e,c=function(e){var a,r;let[i,o]=t.useState(),d=t.useRef({}),l=t.useRef(e),c=t.useRef("none"),[m,u]=(a=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>r[e][t]??e,a));return t.useEffect(()=>{let e=n(d.current);c.current="mounted"===m?e:"none"},[m]),(0,s.useLayoutEffect)(()=>{let t=d.current,a=l.current;if(a!==e){let s=c.current,r=n(t);e?u("MOUNT"):"none"===r||t?.display==="none"?u("UNMOUNT"):a&&s!==r?u("ANIMATION_OUT"):u("UNMOUNT"),l.current=e}},[e,u]),(0,s.useLayoutEffect)(()=>{if(i){let e,t=i.ownerDocument.defaultView??window,a=a=>{let s=n(d.current).includes(a.animationName);if(a.target===i&&s&&(u("ANIMATION_END"),!l.current)){let a=i.style.animationFillMode;i.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===i.style.animationFillMode&&(i.style.animationFillMode=a)})}},s=e=>{e.target===i&&(c.current=n(d.current))};return i.addEventListener("animationstart",s),i.addEventListener("animationcancel",a),i.addEventListener("animationend",a),()=>{t.clearTimeout(e),i.removeEventListener("animationstart",s),i.removeEventListener("animationcancel",a),i.removeEventListener("animationend",a)}}u("ANIMATION_END")},[i,u]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:t.useCallback(e=>{e&&(d.current=getComputedStyle(e)),o(e)},[])}}(d),m="function"==typeof l?l({present:c.isPresent}):t.Children.only(l),u=(0,a.useComposedRefs)(c.ref,(r=m,(o=(i=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?r.ref:(o=(i=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?r.props.ref:r.props.ref||r.ref));return"function"==typeof l||c.isPresent?t.cloneElement(m,{ref:u}):null};function n(e){return e?.animationName||"none"}r.displayName="Presence",e.s(["Presence",()=>r])},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},30374,26999,84762,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(81140),r=e.i(20783),n=e.i(30030),i=e.i(10772),o=e.i(69340),d=e.i(26330),l=e.i(65491),c=e.i(74606),m=e.i(96626),u=e.i(48425),p=e.i(3536),x=e.i(85369),h=e.i(86312),f=e.i(91918),g="Dialog",[v,b]=(0,n.createContextScope)(g),[y,N]=v(g),j=e=>{let{__scopeDialog:s,children:r,open:n,defaultOpen:d,onOpenChange:l,modal:c=!0}=e,m=a.useRef(null),u=a.useRef(null),[p=!1,x]=(0,o.useControllableState)({prop:n,defaultProp:d,onChange:l});return(0,t.jsx)(y,{scope:s,triggerRef:m,contentRef:u,contentId:(0,i.useId)(),titleId:(0,i.useId)(),descriptionId:(0,i.useId)(),open:p,onOpenChange:x,onOpenToggle:a.useCallback(()=>x(e=>!e),[x]),modal:c,children:r})};j.displayName=g;var D="DialogTrigger",w=a.forwardRef((e,a)=>{let{__scopeDialog:n,...i}=e,o=N(D,n),d=(0,r.useComposedRefs)(a,o.triggerRef);return(0,t.jsx)(u.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":H(o.open),...i,ref:d,onClick:(0,s.composeEventHandlers)(e.onClick,o.onOpenToggle)})});w.displayName=D;var C="DialogPortal",[A,S]=v(C,{forceMount:void 0}),T=e=>{let{__scopeDialog:s,forceMount:r,children:n,container:i}=e,o=N(C,s);return(0,t.jsx)(A,{scope:s,forceMount:r,children:a.Children.map(n,e=>(0,t.jsx)(m.Presence,{present:r||o.open,children:(0,t.jsx)(c.Portal,{asChild:!0,container:i,children:e})}))})};T.displayName=C;var k="DialogOverlay",I=a.forwardRef((e,a)=>{let s=S(k,e.__scopeDialog),{forceMount:r=s.forceMount,...n}=e,i=N(k,e.__scopeDialog);return i.modal?(0,t.jsx)(m.Presence,{present:r||i.open,children:(0,t.jsx)(R,{...n,ref:a})}):null});I.displayName=k;var R=a.forwardRef((e,a)=>{let{__scopeDialog:s,...r}=e,n=N(k,s);return(0,t.jsx)(x.RemoveScroll,{as:f.Slot,allowPinchZoom:!0,shards:[n.contentRef],children:(0,t.jsx)(u.Primitive.div,{"data-state":H(n.open),...r,ref:a,style:{pointerEvents:"auto",...r.style}})})}),P="DialogContent",F=a.forwardRef((e,a)=>{let s=S(P,e.__scopeDialog),{forceMount:r=s.forceMount,...n}=e,i=N(P,e.__scopeDialog);return(0,t.jsx)(m.Presence,{present:r||i.open,children:i.modal?(0,t.jsx)(_,{...n,ref:a}):(0,t.jsx)(L,{...n,ref:a})})});F.displayName=P;var _=a.forwardRef((e,n)=>{let i=N(P,e.__scopeDialog),o=a.useRef(null),d=(0,r.useComposedRefs)(n,i.contentRef,o);return a.useEffect(()=>{let e=o.current;if(e)return(0,h.hideOthers)(e)},[]),(0,t.jsx)(E,{...e,ref:d,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),i.triggerRef.current?.focus()}),onPointerDownOutside:(0,s.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,s.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),L=a.forwardRef((e,s)=>{let r=N(P,e.__scopeDialog),n=a.useRef(!1),i=a.useRef(!1);return(0,t.jsx)(E,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));let a=t.target;r.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),E=a.forwardRef((e,s)=>{let{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:c,...m}=e,u=N(P,n),x=a.useRef(null),h=(0,r.useComposedRefs)(s,x);return(0,p.useFocusGuards)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.FocusScope,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:c,children:(0,t.jsx)(d.DismissableLayer,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":H(u.open),...m,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(V,{titleId:u.titleId}),(0,t.jsx)(q,{contentRef:x,descriptionId:u.descriptionId})]})]})}),M="DialogTitle",O=a.forwardRef((e,a)=>{let{__scopeDialog:s,...r}=e,n=N(M,s);return(0,t.jsx)(u.Primitive.h2,{id:n.titleId,...r,ref:a})});O.displayName=M;var X="DialogDescription",Z=a.forwardRef((e,a)=>{let{__scopeDialog:s,...r}=e,n=N(X,s);return(0,t.jsx)(u.Primitive.p,{id:n.descriptionId,...r,ref:a})});Z.displayName=X;var B="DialogClose",z=a.forwardRef((e,a)=>{let{__scopeDialog:r,...n}=e,i=N(B,r);return(0,t.jsx)(u.Primitive.button,{type:"button",...n,ref:a,onClick:(0,s.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})});function H(e){return e?"open":"closed"}z.displayName=B;var U="DialogTitleWarning",[W,G]=(0,n.createContext)(U,{contentName:P,titleName:M,docsSlug:"dialog"}),V=({titleId:e})=>{let t=G(U),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},q=({contentRef:e,descriptionId:t})=>{let s=G("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${s.contentName}}.`;return a.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null};e.s(["Close",()=>z,"Content",()=>F,"Description",()=>Z,"Overlay",()=>I,"Portal",()=>T,"Root",()=>j,"Title",()=>O,"Trigger",()=>w,"WarningProvider",()=>W,"createDialogScope",()=>b],26999);var K=e.i(41947),K=K,$=e.i(47163);function J({...e}){return(0,t.jsx)(j,{"data-slot":"dialog",...e})}function Y({...e}){return(0,t.jsx)(T,{"data-slot":"dialog-portal",...e})}function Q({className:e,...a}){return(0,t.jsx)(I,{"data-slot":"dialog-overlay",className:(0,$.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function ee({className:e,children:a,showCloseButton:s=!0,...r}){return(0,t.jsxs)(Y,{"data-slot":"dialog-portal",children:[(0,t.jsx)(Q,{}),(0,t.jsxs)(F,{"data-slot":"dialog-content",className:(0,$.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[a,s&&(0,t.jsxs)(z,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(K.default,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function et({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,$.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function ea({className:e,...a}){return(0,t.jsx)(O,{"data-slot":"dialog-title",className:(0,$.cn)("text-lg leading-none font-semibold",e),...a})}function es({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,$.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Dialog",()=>J,"DialogContent",()=>ee,"DialogHeader",()=>et,"DialogTitle",()=>ea],30374),e.s(["Textarea",()=>es],84762)},7450,68766,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(4421),r=e.i(30374),n=e.i(94179),i=e.i(67881),o=e.i(70065),d=e.i(62870),l=e.i(84762),c=e.i(78583),m=e.i(75254);let u=(0,m.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),p=(0,m.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),x=(0,m.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),h=(0,m.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var f=e.i(27612);let g=["Part Payment","Skip EMI"];function v({recordId:e,open:m,onClose:v}){let{records:b,updateRecordStatus:y,updateRecordStage:N,updatePartPayment:j,addRemark:D,updateRemark:w,deleteRemark:C,deleteActivityLog:A}=(0,s.useCRMStore)(),[S,T]=(0,a.useState)(""),[k,I]=(0,a.useState)(null),[R,P]=(0,a.useState)(""),F=b.find(t=>t.id===e)||null;if(!F)return null;let _="protect"===F.type;return(0,t.jsx)(r.Dialog,{open:m,onOpenChange:v,children:(0,t.jsxs)(r.DialogContent,{className:"max-w-3xl bg-card border-border max-h-[90vh] flex flex-col p-0 gap-0",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-border bg-card z-10",children:[(0,t.jsx)(r.DialogHeader,{children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/20",children:(0,t.jsx)("span",{className:"text-lg font-semibold text-primary",children:F.name.split(" ").map(e=>e[0]).join("").substring(0,2)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(r.DialogTitle,{className:"text-xl font-semibold text-foreground",children:F.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(n.Badge,{variant:"outline",className:_?"bg-blue-500/10 text-blue-500 border-blue-500/20 text-xs":"bg-green-500/10 text-green-500 border-green-500/20 text-xs",children:F.type}),(0,t.jsx)(n.Badge,{variant:"outline",className:"text-xs capitalize",children:F.partner})]})]})]})})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground w-12",children:"Status:"}),(0,t.jsxs)(d.Select,{value:F.status,onValueChange:e=>y(F.id,e),children:[(0,t.jsx)(d.SelectTrigger,{className:"w-[140px] h-8 text-sm",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"new",children:"New"}),(0,t.jsx)(d.SelectItem,{value:"in-progress",children:"In Progress"}),(0,t.jsx)(d.SelectItem,{value:"follow-up",children:"Follow-up"}),(0,t.jsx)(d.SelectItem,{value:"closed",children:"Closed"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground w-12",children:"Stage:"}),(0,t.jsxs)(d.Select,{value:F.stage,onValueChange:e=>N(F.id,e),children:[(0,t.jsx)(d.SelectTrigger,{className:"w-[160px] h-8 text-sm",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsx)(d.SelectContent,{children:g.map(e=>(0,t.jsx)(d.SelectItem,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-4 bg-muted/30 p-3 rounded-md border border-border/50",children:[(0,t.jsx)("span",{className:"text-sm font-medium w-32",children:"Part Payment (₹):"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm",children:"₹"}),(0,t.jsx)("input",{type:"number",className:"h-9 w-32 rounded-md border border-input bg-background pl-7 pr-3 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",placeholder:"0",value:F.partPaymentAmount||"",onChange:e=>j(F.id,Number(e.target.value))})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-primary/80 font-medium pb-2 border-b border-border/50",children:[(0,t.jsx)(c.FileText,{className:"h-4 w-4"}),(0,t.jsx)("h3",{children:"Details"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(o.Card,{className:"bg-muted/20 border-border shadow-none",children:(0,t.jsxs)(o.CardContent,{className:"pt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Mobile"}),(0,t.jsx)("span",{className:"text-sm font-mono",children:F.mobileNumber})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Partner"}),(0,t.jsx)("span",{className:"text-sm capitalize",children:F.partner})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Form Filled"}),(0,t.jsx)("span",{className:"text-sm",children:F.formFilledDate})]})]})}),(0,t.jsx)(o.Card,{className:"bg-muted/20 border-border shadow-none",children:(0,t.jsxs)(o.CardContent,{className:"pt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Source"}),(0,t.jsx)("span",{className:"text-sm truncate max-w-[120px]",title:F.uploadedFrom,children:F.uploadedFrom})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Uploaded"}),(0,t.jsx)("span",{className:"text-sm",children:new Date(F.uploadedAt).toLocaleDateString()})]})]})})]}),(0,t.jsx)(o.Card,{className:"bg-muted/20 border-border shadow-none",children:(0,t.jsx)(o.CardContent,{className:"pt-4",children:_?(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 gap-x-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Plan"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:F.plan})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Institution"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:F.institution})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Account No"}),(0,t.jsx)("p",{className:"text-sm font-medium font-mono",children:F.accountNumber})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"EMI Amount"}),(0,t.jsxs)("p",{className:"text-sm font-medium font-mono",children:["₹",F.emiAmount.toLocaleString()]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"EMI Date"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:F.emiDate})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Current DPD"}),(0,t.jsxs)("p",{className:"text-sm font-medium",children:[F.currentDpd," days"]})]})]}):(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 gap-x-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Lender"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:F.lenderName})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Loan Acc No"}),(0,t.jsx)("p",{className:"text-sm font-medium font-mono",children:F.loanAccNo})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Due Amount"}),(0,t.jsxs)("p",{className:"text-sm font-medium font-mono",children:["₹",F.dueAmt.toLocaleString()]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Rec. Amount"}),(0,t.jsxs)("p",{className:"text-sm font-medium font-mono text-green-500",children:["₹",F.recommendedAmt.toLocaleString()]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Legal Notice"}),(0,t.jsx)(n.Badge,{variant:F.isLegalNotice?"destructive":"outline",className:"text-[10px] h-5",children:F.isLegalNotice?"Yes":"No"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Employment"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:F.currEmployment})]})]})})})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-primary/80 font-medium pb-2 border-b border-border/50",children:[(0,t.jsx)(u,{className:"h-4 w-4"}),(0,t.jsx)("h3",{children:"Remarks"})]}),(0,t.jsxs)("div",{className:"bg-muted/20 border border-border rounded-lg p-4 space-y-4",children:[(0,t.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:0===F.remarks.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground text-sm italic",children:"No remarks yet. Add one below."}):F.remarks.map(e=>(0,t.jsx)("div",{className:"bg-background rounded-md p-3 border border-border/50 shadow-sm",children:k===e.id?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Textarea,{value:R,onChange:e=>P(e.target.value),className:"min-h-[60px] text-sm"}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(i.Button,{size:"sm",variant:"ghost",onClick:()=>I(null),className:"h-7 text-xs",children:"Cancel"}),(0,t.jsx)(i.Button,{size:"sm",onClick:()=>{var t;return t=e.id,void(R.trim()&&(w(F.id,t,R),I(null),P("")))},className:"h-7 text-xs",children:"Save"})]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap break-words leading-relaxed",children:e.text}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-dashed border-border/50",children:[(0,t.jsxs)("span",{className:"text-[10px] text-muted-foreground font-medium",children:[e.createdBy," • ",new Date(e.createdAt).toLocaleString(),e.updatedAt&&" (edited)"]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(i.Button,{size:"icon",variant:"ghost",className:"h-5 w-5 hover:bg-muted",onClick:()=>{I(e.id),P(e.text)},children:(0,t.jsx)(h,{className:"h-3 w-3 text-muted-foreground"})}),(0,t.jsx)(i.Button,{size:"icon",variant:"ghost",className:"h-5 w-5 hover:bg-destructive/10 hover:text-destructive",onClick:()=>{var t;return t=e.id,void C(F.id,t)},children:(0,t.jsx)(f.Trash2,{className:"h-3 w-3"})})]})]})]})},e.id))}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 pt-2",children:[(0,t.jsx)(l.Textarea,{placeholder:"Type a new remark here...",value:S,onChange:e=>T(e.target.value),className:"min-h-[80px] bg-background text-sm resize-none focus-visible:ring-1"}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(i.Button,{onClick:()=>{S.trim()&&(D(F.id,{text:S,createdAt:new Date().toISOString(),createdBy:"Admin"}),T(""))},disabled:!S.trim(),size:"sm",className:"px-4",children:[(0,t.jsx)(x,{className:"h-3 w-3 mr-1.5"})," Add Remark"]})})]})]})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-primary/80 font-medium pb-2 border-b border-border/50",children:[(0,t.jsx)(p,{className:"h-4 w-4"}),(0,t.jsx)("h3",{children:"Activity Log"})]}),(0,t.jsxs)("div",{className:"relative pl-2",children:[(0,t.jsx)("div",{className:"absolute left-[11px] top-2 bottom-2 w-px bg-border/60"}),(0,t.jsx)("div",{className:"space-y-6",children:F.activityLog.slice().reverse().map(e=>(0,t.jsxs)("div",{className:"relative pl-8",children:[(0,t.jsx)("div",{className:"absolute left-0 top-1 w-6 h-6 rounded-full bg-background border border-border flex items-center justify-center z-10",children:(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-start w-full gap-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.action}),(0,t.jsx)(i.Button,{size:"icon",variant:"ghost",className:"h-4 w-4 text-muted-foreground hover:text-destructive -mt-1",onClick:()=>A(F.id,e.id),children:(0,t.jsx)(f.Trash2,{className:"h-3 w-3"})})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:e.details}),(0,t.jsxs)("p",{className:"text-[10px] text-muted-foreground mt-1 font-mono opacity-70",children:[new Date(e.timestamp).toLocaleString()," • ",e.user]})]})]},e.id))})]})]})]}),(0,t.jsx)("div",{className:"p-4 border-t border-border bg-card z-10 flex justify-end",children:(0,t.jsx)(i.Button,{onClick:v,className:"px-8",children:"Update"})})]})})}function b(e,t){let a=e.filter(e=>"protect"===e.type),s=e.filter(e=>"settlement"===e.type),r={"0-30":0,"31-60":0,"61-90":0,"91-180":0,"180+":0};a.forEach(e=>{r[e.dpdGroup]++});let n=new Map,i=new Date;for(let e=29;e>=0;e--){let t=new Date(i);t.setDate(t.getDate()-e);let a=t.toISOString().split("T")[0];n.set(a,{count:0,protect:0,settlement:0})}e.forEach(e=>{let t=e.formFilledDate.split("T")[0];if(n.has(t)){let a=n.get(t);a.count++,"protect"===e.type?a.protect++:a.settlement++}});let o=0,d=new Date;d.setHours(0,0,0,0);let l=d.toISOString().split("T")[0];return e.forEach(e=>{let t=e.lastPaymentDate;if((!t||t===l)&&("protect"===e.type&&e.emiDate&&e.emiDate!==l?t=e.emiDate:"settlement"===e.type&&e.dueDate&&e.dueDate!==l&&(t=e.dueDate)),t){let e=new Date(t);!isNaN(e.getTime())&&(e.setHours(0,0,0,0),Math.floor((d.getTime()-e.getTime())/864e5)>=90&&o++)}}),{totalRequests:e.length,totalProtect:a.length,totalSettlement:s.length,sayyamProtect:a.filter(e=>"sayyam"===e.partner.toLowerCase()).length,sayyamSettlement:s.filter(e=>"sayyam"===e.partner.toLowerCase()).length,snapmintProtect:a.filter(e=>"snapmint"===e.partner.toLowerCase()).length,snapmintSettlement:s.filter(e=>"snapmint"===e.partner.toLowerCase()).length,dpdDistribution:Object.entries(r).map(([e,t])=>({group:e,count:t})),dailyRequests:Array.from(n.entries()).map(([e,t])=>({date:e,...t})),recentUploads:t.slice(0,5),newRequestsToday:e.filter(e=>e.formFilledDate.startsWith(new Date().toISOString().split("T")[0])).length,casesNPAToday:o}}e.s(["RecordDetailModal",()=>v],7450),e.s(["calculateDashboardStats",()=>b,"sampleNexusRecords",0,[{id:"n1",type:"nexus",nexusPurchaseDate:"2024-11-15",formFilledDate:"",userId:"user_12345",name:"Aarav Patel",mobileNumber:"9876543210",email:"aarav.patel@example.com",status:"new",partner:"other",stage:"Onboarding",uploadedFrom:"nexus_batch_nov.csv",uploadedAt:"2024-11-20T10:00:00Z",remarks:[],activityLog:[{id:"a_n1",action:"Record Created",details:"Imported from nexus_batch_nov.csv",timestamp:"2024-11-20T10:00:00Z",user:"System"}]},{id:"n2",type:"nexus",nexusPurchaseDate:"2024-10-05",formFilledDate:"2024-10-08",userId:"user_67890",name:"Ishaan Gupta",mobileNumber:"9123456789",email:"ishaan.g@example.com",status:"in-progress",partner:"other",stage:"Verification",uploadedFrom:"nexus_batch_oct.csv",uploadedAt:"2024-10-08T14:15:00Z",remarks:[{id:"r_n1",text:"User requested callback",createdAt:"2024-10-10T11:00:00Z",createdBy:"Support"}],activityLog:[{id:"a_n2",action:"Record Created",details:"Imported from nexus_batch_oct.csv",timestamp:"2024-10-08T14:15:00Z",user:"System"}]},{id:"n3",type:"nexus",nexusPurchaseDate:"2024-12-01",formFilledDate:"2024-12-02",userId:"user_54321",name:"Zara Khan",mobileNumber:"9988776655",email:"zara.k@example.com",status:"closed",partner:"other",stage:"Completed",uploadedFrom:"nexus_batch_dec.csv",uploadedAt:"2024-12-02T09:30:00Z",remarks:[],activityLog:[{id:"a_n3",action:"Record Created",details:"Imported from nexus_batch_dec.csv",timestamp:"2024-12-02T09:30:00Z",user:"System"}]}],"sampleProtectRecords",0,[{id:"p1",type:"protect",partner:"sayyam",nexusPurchaseDate:"2024-10-15",formFilledDate:"2024-10-20",name:"Rahul Sharma",mobileNumber:"9876543210",plan:"Premium",institution:"HDFC Bank",accountNumber:"XXXX1234",accountType:"Savings",dateOpened:"2022-05-10",emiDate:"2024-11-05",emiAmount:15e3,dpd:45,currentDpd:52,dpdGroup:"31-60",status:"in-progress",stage:"Documentation",uploadedFrom:"batch_oct_2024.xlsx",uploadedAt:"2024-10-20T10:30:00Z",remarks:[{id:"r1",text:"Customer contacted, willing to settle",createdAt:"2024-10-25T14:00:00Z",createdBy:"Admin"}],activityLog:[{id:"a1",action:"Record Created",details:"Imported from batch_oct_2024.xlsx",timestamp:"2024-10-20T10:30:00Z",user:"System"}]},{id:"p2",type:"protect",partner:"snapmint",nexusPurchaseDate:"2024-09-22",formFilledDate:"2024-09-25",name:"Priya Patel",mobileNumber:"9988776655",plan:"Basic",institution:"ICICI Bank",accountNumber:"XXXX5678",accountType:"Current",dateOpened:"2021-03-15",emiDate:"2024-10-10",emiAmount:8500,dpd:25,currentDpd:28,dpdGroup:"0-30",status:"new",stage:"Initial Review",uploadedFrom:"sept_batch.csv",uploadedAt:"2024-09-25T09:15:00Z",remarks:[],activityLog:[{id:"a2",action:"Record Created",details:"Imported from sept_batch.csv",timestamp:"2024-09-25T09:15:00Z",user:"System"}]},{id:"p3",type:"protect",partner:"sayyam",nexusPurchaseDate:"2024-08-10",formFilledDate:"2024-08-15",name:"Amit Kumar",mobileNumber:"9123456780",plan:"Gold",institution:"Axis Bank",accountNumber:"XXXX9012",accountType:"Savings",dateOpened:"2020-11-20",emiDate:"2024-09-01",emiAmount:22e3,dpd:95,currentDpd:102,dpdGroup:"91-180",status:"follow-up",stage:"Negotiation",uploadedFrom:"aug_data.xlsx",uploadedAt:"2024-08-15T11:45:00Z",remarks:[{id:"r2",text:"Customer requested extension",createdAt:"2024-09-10T16:30:00Z",createdBy:"Admin"},{id:"r3",text:"Follow-up scheduled for next week",createdAt:"2024-10-01T10:00:00Z",createdBy:"Admin"}],activityLog:[{id:"a3",action:"Record Created",details:"Imported from aug_data.xlsx",timestamp:"2024-08-15T11:45:00Z",user:"System"},{id:"a4",action:"Status Changed",details:"Status updated to follow-up",timestamp:"2024-09-15T14:20:00Z",user:"Admin"}]},{id:"p4",type:"protect",partner:"snapmint",nexusPurchaseDate:"2024-07-05",formFilledDate:"2024-07-10",name:"Sneha Gupta",mobileNumber:"9876123450",plan:"Premium",institution:"SBI",accountNumber:"XXXX3456",accountType:"Savings",dateOpened:"2019-08-25",emiDate:"2024-08-15",emiAmount:12e3,dpd:120,currentDpd:135,dpdGroup:"91-180",status:"closed",stage:"Resolved",uploadedFrom:"july_protect.xlsx",uploadedAt:"2024-07-10T08:00:00Z",remarks:[{id:"r4",text:"Settlement completed successfully",createdAt:"2024-10-15T12:00:00Z",createdBy:"Admin"}],activityLog:[{id:"a5",action:"Record Created",details:"Imported from july_protect.xlsx",timestamp:"2024-07-10T08:00:00Z",user:"System"},{id:"a6",action:"Status Changed",details:"Status updated to closed",timestamp:"2024-10-15T12:00:00Z",user:"Admin"}]},{id:"p5",type:"protect",partner:"sayyam",nexusPurchaseDate:"2024-11-01",formFilledDate:"2024-11-05",name:"Vikram Singh",mobileNumber:"9654321098",plan:"Basic",institution:"Kotak Bank",accountNumber:"XXXX7890",accountType:"Current",dateOpened:"2023-01-10",emiDate:"2024-11-20",emiAmount:18500,dpd:15,currentDpd:18,dpdGroup:"0-30",status:"new",stage:"Initial Review",uploadedFrom:"nov_batch.xlsx",uploadedAt:"2024-11-05T15:30:00Z",remarks:[],activityLog:[{id:"a7",action:"Record Created",details:"Imported from nov_batch.xlsx",timestamp:"2024-11-05T15:30:00Z",user:"System"}]}],"sampleSettlementRecords",0,[{id:"s1",type:"settlement",partner:"sayyam",nexusPurchaseDate:"2024-10-01",formFilledDate:"2024-10-05",name:"Anita Desai",mobileNumber:"9876509876",lenderName:"HDFC Credit Cards",creditCardNo:"XXXX-XXXX-XXXX-4521",loanAccNo:"CC123456789",dueAmt:85e3,dueDate:"2024-10-30",isEmiBounced:!0,isLegalNotice:!1,currEmployment:"Private Sector",recommendedAmt:51e3,customerWishAmt:45e3,status:"in-progress",stage:"Negotiation",uploadedFrom:"oct_settlements.xlsx",uploadedAt:"2024-10-05T12:00:00Z",remarks:[{id:"r5",text:"Lender agreed to 60% settlement",createdAt:"2024-10-20T11:30:00Z",createdBy:"Admin"}],activityLog:[{id:"a8",action:"Record Created",details:"Imported from oct_settlements.xlsx",timestamp:"2024-10-05T12:00:00Z",user:"System"}]},{id:"s2",type:"settlement",partner:"snapmint",nexusPurchaseDate:"2024-09-15",formFilledDate:"2024-09-18",name:"Rajesh Verma",mobileNumber:"9123098765",lenderName:"Bajaj Finance",creditCardNo:"",loanAccNo:"BFL987654321",dueAmt:125e3,dueDate:"2024-09-25",isEmiBounced:!0,isLegalNotice:!0,currEmployment:"Self Employed",recommendedAmt:75e3,customerWishAmt:62500,status:"follow-up",stage:"Legal Review",uploadedFrom:"sept_settlements.csv",uploadedAt:"2024-09-18T14:30:00Z",remarks:[{id:"r6",text:"Legal notice received, need urgent attention",createdAt:"2024-09-25T09:00:00Z",createdBy:"Admin"},{id:"r7",text:"Customer consulting with lawyer",createdAt:"2024-10-05T16:00:00Z",createdBy:"Admin"}],activityLog:[{id:"a9",action:"Record Created",details:"Imported from sept_settlements.csv",timestamp:"2024-09-18T14:30:00Z",user:"System"},{id:"a10",action:"Status Changed",details:"Status updated to follow-up",timestamp:"2024-09-25T09:00:00Z",user:"Admin"}]},{id:"s3",type:"settlement",partner:"sayyam",nexusPurchaseDate:"2024-08-20",formFilledDate:"2024-08-22",name:"Meera Joshi",mobileNumber:"9988112233",lenderName:"ICICI Personal Loan",creditCardNo:"",loanAccNo:"PL456789012",dueAmt:2e5,dueDate:"2024-08-31",isEmiBounced:!1,isLegalNotice:!1,currEmployment:"Government",recommendedAmt:14e4,customerWishAmt:12e4,status:"closed",stage:"Resolved",uploadedFrom:"aug_settlements.xlsx",uploadedAt:"2024-08-22T10:15:00Z",remarks:[{id:"r8",text:"Settlement completed at 65%",createdAt:"2024-10-10T14:00:00Z",createdBy:"Admin"}],activityLog:[{id:"a11",action:"Record Created",details:"Imported from aug_settlements.xlsx",timestamp:"2024-08-22T10:15:00Z",user:"System"},{id:"a12",action:"Status Changed",details:"Status updated to closed",timestamp:"2024-10-10T14:00:00Z",user:"Admin"}]},{id:"s4",type:"settlement",partner:"snapmint",nexusPurchaseDate:"2024-11-10",formFilledDate:"2024-11-12",name:"Karan Malhotra",mobileNumber:"9876001234",lenderName:"Axis Credit Card",creditCardNo:"XXXX-XXXX-XXXX-7890",loanAccNo:"AX789012345",dueAmt:55e3,dueDate:"2024-11-25",isEmiBounced:!1,isLegalNotice:!1,currEmployment:"Private Sector",recommendedAmt:38500,customerWishAmt:33e3,status:"new",stage:"Initial Review",uploadedFrom:"nov_settlements.xlsx",uploadedAt:"2024-11-12T16:45:00Z",remarks:[],activityLog:[{id:"a13",action:"Record Created",details:"Imported from nov_settlements.xlsx",timestamp:"2024-11-12T16:45:00Z",user:"System"}]}]],68766)}]);