module.exports=[77192,a=>{"use strict";var b=a.i(72131),c=a.i(70121),d=a.i(72752),e=a=>{var e;let g,h,{present:i,children:j}=a,k=function(a){var c,e;let[g,h]=b.useState(),i=b.useRef({}),j=b.useRef(a),k=b.useRef("none"),[l,m]=(c=a?"mounted":"unmounted",e={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},b.useReducer((a,b)=>e[a][b]??a,c));return b.useEffect(()=>{let a=f(i.current);k.current="mounted"===l?a:"none"},[l]),(0,d.useLayoutEffect)(()=>{let b=i.current,c=j.current;if(c!==a){let d=k.current,e=f(b);a?m("MOUNT"):"none"===e||b?.display==="none"?m("UNMOUNT"):c&&d!==e?m("ANIMATION_OUT"):m("UNMOUNT"),j.current=a}},[a,m]),(0,d.useLayoutEffect)(()=>{if(g){let a,b=g.ownerDocument.defaultView??window,c=c=>{let d=f(i.current).includes(c.animationName);if(c.target===g&&d&&(m("ANIMATION_END"),!j.current)){let c=g.style.animationFillMode;g.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===g.style.animationFillMode&&(g.style.animationFillMode=c)})}},d=a=>{a.target===g&&(k.current=f(i.current))};return g.addEventListener("animationstart",d),g.addEventListener("animationcancel",c),g.addEventListener("animationend",c),()=>{b.clearTimeout(a),g.removeEventListener("animationstart",d),g.removeEventListener("animationcancel",c),g.removeEventListener("animationend",c)}}m("ANIMATION_END")},[g,m]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(a=>{a&&(i.current=getComputedStyle(a)),h(a)},[])}}(i),l="function"==typeof j?j({present:k.isPresent}):b.Children.only(j),m=(0,c.useComposedRefs)(k.ref,(e=l,(h=(g=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.ref:(h=(g=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.props.ref:e.props.ref||e.ref));return"function"==typeof j||k.isPresent?b.cloneElement(l,{ref:m}):null};function f(a){return a?.animationName||"none"}e.displayName="Presence",a.s(["Presence",()=>e])},52254,a=>{"use strict";var b=a.i(11989);a.s(["ChevronRightIcon",()=>b.default])},17756,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["default",()=>b])},77156,a=>{"use strict";let b=(0,a.i(70106).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},65733,97942,46893,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(7554),e=a.i(70121),f=a.i(50104),g=a.i(92843),h=a.i(25152),i=a.i(96743),j=a.i(22297),k=a.i(92616),l=a.i(77192),m=a.i(30553),n=a.i(86228),o=a.i(52081),p=a.i(41852),q=a.i(11011),r="Dialog",[s,t]=(0,f.createContextScope)(r),[u,v]=s(r),w=a=>{let{__scopeDialog:d,children:e,open:f,defaultOpen:i,onOpenChange:j,modal:k=!0}=a,l=c.useRef(null),m=c.useRef(null),[n=!1,o]=(0,h.useControllableState)({prop:f,defaultProp:i,onChange:j});return(0,b.jsx)(u,{scope:d,triggerRef:l,contentRef:m,contentId:(0,g.useId)(),titleId:(0,g.useId)(),descriptionId:(0,g.useId)(),open:n,onOpenChange:o,onOpenToggle:c.useCallback(()=>o(a=>!a),[o]),modal:k,children:e})};w.displayName=r;var x="DialogTrigger",y=c.forwardRef((a,c)=>{let{__scopeDialog:f,...g}=a,h=v(x,f),i=(0,e.useComposedRefs)(c,h.triggerRef);return(0,b.jsx)(m.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":R(h.open),...g,ref:i,onClick:(0,d.composeEventHandlers)(a.onClick,h.onOpenToggle)})});y.displayName=x;var z="DialogPortal",[A,B]=s(z,{forceMount:void 0}),C=a=>{let{__scopeDialog:d,forceMount:e,children:f,container:g}=a,h=v(z,d);return(0,b.jsx)(A,{scope:d,forceMount:e,children:c.Children.map(f,a=>(0,b.jsx)(l.Presence,{present:e||h.open,children:(0,b.jsx)(k.Portal,{asChild:!0,container:g,children:a})}))})};C.displayName=z;var D="DialogOverlay",E=c.forwardRef((a,c)=>{let d=B(D,a.__scopeDialog),{forceMount:e=d.forceMount,...f}=a,g=v(D,a.__scopeDialog);return g.modal?(0,b.jsx)(l.Presence,{present:e||g.open,children:(0,b.jsx)(F,{...f,ref:c})}):null});E.displayName=D;var F=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=v(D,d);return(0,b.jsx)(o.RemoveScroll,{as:q.Slot,allowPinchZoom:!0,shards:[f.contentRef],children:(0,b.jsx)(m.Primitive.div,{"data-state":R(f.open),...e,ref:c,style:{pointerEvents:"auto",...e.style}})})}),G="DialogContent",H=c.forwardRef((a,c)=>{let d=B(G,a.__scopeDialog),{forceMount:e=d.forceMount,...f}=a,g=v(G,a.__scopeDialog);return(0,b.jsx)(l.Presence,{present:e||g.open,children:g.modal?(0,b.jsx)(I,{...f,ref:c}):(0,b.jsx)(J,{...f,ref:c})})});H.displayName=G;var I=c.forwardRef((a,f)=>{let g=v(G,a.__scopeDialog),h=c.useRef(null),i=(0,e.useComposedRefs)(f,g.contentRef,h);return c.useEffect(()=>{let a=h.current;if(a)return(0,p.hideOthers)(a)},[]),(0,b.jsx)(K,{...a,ref:i,trapFocus:g.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,d.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),g.triggerRef.current?.focus()}),onPointerDownOutside:(0,d.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,d.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault())})}),J=c.forwardRef((a,d)=>{let e=v(G,a.__scopeDialog),f=c.useRef(!1),g=c.useRef(!1);return(0,b.jsx)(K,{...a,ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(f.current||e.triggerRef.current?.focus(),b.preventDefault()),f.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(f.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let c=b.target;e.triggerRef.current?.contains(c)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),K=c.forwardRef((a,d)=>{let{__scopeDialog:f,trapFocus:g,onOpenAutoFocus:h,onCloseAutoFocus:k,...l}=a,m=v(G,f),o=c.useRef(null),p=(0,e.useComposedRefs)(d,o);return(0,n.useFocusGuards)(),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.FocusScope,{asChild:!0,loop:!0,trapped:g,onMountAutoFocus:h,onUnmountAutoFocus:k,children:(0,b.jsx)(i.DismissableLayer,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":R(m.open),...l,ref:p,onDismiss:()=>m.onOpenChange(!1)})}),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(V,{titleId:m.titleId}),(0,b.jsx)(W,{contentRef:o,descriptionId:m.descriptionId})]})]})}),L="DialogTitle",M=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=v(L,d);return(0,b.jsx)(m.Primitive.h2,{id:f.titleId,...e,ref:c})});M.displayName=L;var N="DialogDescription",O=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=v(N,d);return(0,b.jsx)(m.Primitive.p,{id:f.descriptionId,...e,ref:c})});O.displayName=N;var P="DialogClose",Q=c.forwardRef((a,c)=>{let{__scopeDialog:e,...f}=a,g=v(P,e);return(0,b.jsx)(m.Primitive.button,{type:"button",...f,ref:c,onClick:(0,d.composeEventHandlers)(a.onClick,()=>g.onOpenChange(!1))})});function R(a){return a?"open":"closed"}Q.displayName=P;var S="DialogTitleWarning",[T,U]=(0,f.createContext)(S,{contentName:G,titleName:L,docsSlug:"dialog"}),V=({titleId:a})=>{let b=U(S),d=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return c.useEffect(()=>{a&&(document.getElementById(a)||console.error(d))},[d,a]),null},W=({contentRef:a,descriptionId:b})=>{let d=U("DialogDescriptionWarning"),e=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${d.contentName}}.`;return c.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(e))},[e,a,b]),null};a.s(["Close",()=>Q,"Content",()=>H,"Description",()=>O,"Overlay",()=>E,"Portal",()=>C,"Root",()=>w,"Title",()=>M,"Trigger",()=>y,"WarningProvider",()=>T,"createDialogScope",()=>t],97942);var X=a.i(62213),X=X,Y=a.i(97895);function Z({...a}){return(0,b.jsx)(w,{"data-slot":"dialog",...a})}function $({...a}){return(0,b.jsx)(C,{"data-slot":"dialog-portal",...a})}function _({className:a,...c}){return(0,b.jsx)(E,{"data-slot":"dialog-overlay",className:(0,Y.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...c})}function aa({className:a,children:c,showCloseButton:d=!0,...e}){return(0,b.jsxs)($,{"data-slot":"dialog-portal",children:[(0,b.jsx)(_,{}),(0,b.jsxs)(H,{"data-slot":"dialog-content",className:(0,Y.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...e,children:[c,d&&(0,b.jsxs)(Q,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(X.default,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ab({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,Y.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function ac({className:a,...c}){return(0,b.jsx)(M,{"data-slot":"dialog-title",className:(0,Y.cn)("text-lg leading-none font-semibold",a),...c})}function ad({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,Y.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}a.s(["Dialog",()=>Z,"DialogContent",()=>aa,"DialogHeader",()=>ab,"DialogTitle",()=>ac],65733),a.s(["Textarea",()=>ad],46893)},4720,a=>{"use strict";let b=(0,a.i(70106).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],4720)},49439,43118,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68515),e=a.i(65733),f=a.i(54161),g=a.i(40695),h=a.i(3130),i=a.i(87682),j=a.i(46893),k=a.i(4720),l=a.i(70106);let m=(0,l.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),n=(0,l.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),o=(0,l.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),p=(0,l.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var q=a.i(81560);let r=["Part Payment","Skip EMI"];function s({recordId:a,open:l,onClose:s}){let{records:t,updateRecordStatus:u,updateRecordStage:v,updatePartPayment:w,addRemark:x,updateRemark:y,deleteRemark:z,deleteActivityLog:A}=(0,d.useCRMStore)(),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(""),H=t.find(b=>b.id===a)||null;if(!H)return null;let I="protect"===H.type;return(0,b.jsx)(e.Dialog,{open:l,onOpenChange:s,children:(0,b.jsxs)(e.DialogContent,{className:"max-w-3xl bg-card border-border max-h-[90vh] flex flex-col p-0 gap-0",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-border bg-card z-10",children:[(0,b.jsx)(e.DialogHeader,{children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/20",children:(0,b.jsx)("span",{className:"text-lg font-semibold text-primary",children:H.name.split(" ").map(a=>a[0]).join("").substring(0,2)})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.DialogTitle,{className:"text-xl font-semibold text-foreground",children:H.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(f.Badge,{variant:"outline",className:I?"bg-blue-500/10 text-blue-500 border-blue-500/20 text-xs":"bg-green-500/10 text-green-500 border-green-500/20 text-xs",children:H.type}),(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs capitalize",children:H.partner})]})]})]})})}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground w-12",children:"Status:"}),(0,b.jsxs)(i.Select,{value:H.status,onValueChange:a=>u(H.id,a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[140px] h-8 text-sm",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"new",children:"New"}),(0,b.jsx)(i.SelectItem,{value:"in-progress",children:"In Progress"}),(0,b.jsx)(i.SelectItem,{value:"follow-up",children:"Follow-up"}),(0,b.jsx)(i.SelectItem,{value:"closed",children:"Closed"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground w-12",children:"Stage:"}),(0,b.jsxs)(i.Select,{value:H.stage,onValueChange:a=>v(H.id,a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[160px] h-8 text-sm",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsx)(i.SelectContent,{children:r.map(a=>(0,b.jsx)(i.SelectItem,{value:a,children:a},a))})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-4 bg-muted/30 p-3 rounded-md border border-border/50",children:[(0,b.jsx)("span",{className:"text-sm font-medium w-32",children:"Part Payment (₹):"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm",children:"₹"}),(0,b.jsx)("input",{type:"number",className:"h-9 w-32 rounded-md border border-input bg-background pl-7 pr-3 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",placeholder:"0",value:H.partPaymentAmount||"",onChange:a=>w(H.id,Number(a.target.value))})]})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary/80 font-medium pb-2 border-b border-border/50",children:[(0,b.jsx)(k.FileText,{className:"h-4 w-4"}),(0,b.jsx)("h3",{children:"Details"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(h.Card,{className:"bg-muted/20 border-border shadow-none",children:(0,b.jsxs)(h.CardContent,{className:"pt-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Mobile"}),(0,b.jsx)("span",{className:"text-sm font-mono",children:H.mobileNumber})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Partner"}),(0,b.jsx)("span",{className:"text-sm capitalize",children:H.partner})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Form Filled"}),(0,b.jsx)("span",{className:"text-sm",children:H.formFilledDate})]})]})}),(0,b.jsx)(h.Card,{className:"bg-muted/20 border-border shadow-none",children:(0,b.jsxs)(h.CardContent,{className:"pt-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Source"}),(0,b.jsx)("span",{className:"text-sm truncate max-w-[120px]",title:H.uploadedFrom,children:H.uploadedFrom})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Uploaded"}),(0,b.jsx)("span",{className:"text-sm",children:new Date(H.uploadedAt).toLocaleDateString()})]})]})})]}),(0,b.jsx)(h.Card,{className:"bg-muted/20 border-border shadow-none",children:(0,b.jsx)(h.CardContent,{className:"pt-4",children:I?(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 gap-x-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Plan"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:H.plan})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Institution"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:H.institution})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Account No"}),(0,b.jsx)("p",{className:"text-sm font-medium font-mono",children:H.accountNumber})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"EMI Amount"}),(0,b.jsxs)("p",{className:"text-sm font-medium font-mono",children:["₹",H.emiAmount.toLocaleString()]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"EMI Date"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:H.emiDate})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Current DPD"}),(0,b.jsxs)("p",{className:"text-sm font-medium",children:[H.currentDpd," days"]})]})]}):(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 gap-x-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Lender"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:H.lenderName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Loan Acc No"}),(0,b.jsx)("p",{className:"text-sm font-medium font-mono",children:H.loanAccNo})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Due Amount"}),(0,b.jsxs)("p",{className:"text-sm font-medium font-mono",children:["₹",H.dueAmt.toLocaleString()]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Rec. Amount"}),(0,b.jsxs)("p",{className:"text-sm font-medium font-mono text-green-500",children:["₹",H.recommendedAmt.toLocaleString()]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Legal Notice"}),(0,b.jsx)(f.Badge,{variant:H.isLegalNotice?"destructive":"outline",className:"text-[10px] h-5",children:H.isLegalNotice?"Yes":"No"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Employment"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:H.currEmployment})]})]})})})]}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary/80 font-medium pb-2 border-b border-border/50",children:[(0,b.jsx)(m,{className:"h-4 w-4"}),(0,b.jsx)("h3",{children:"Remarks"})]}),(0,b.jsxs)("div",{className:"bg-muted/20 border border-border rounded-lg p-4 space-y-4",children:[(0,b.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:0===H.remarks.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground text-sm italic",children:"No remarks yet. Add one below."}):H.remarks.map(a=>(0,b.jsx)("div",{className:"bg-background rounded-md p-3 border border-border/50 shadow-sm",children:D===a.id?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Textarea,{value:F,onChange:a=>G(a.target.value),className:"min-h-[60px] text-sm"}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(g.Button,{size:"sm",variant:"ghost",onClick:()=>E(null),className:"h-7 text-xs",children:"Cancel"}),(0,b.jsx)(g.Button,{size:"sm",onClick:()=>{var b;return b=a.id,void(F.trim()&&(y(H.id,b,F),E(null),G("")))},className:"h-7 text-xs",children:"Save"})]})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap break-words leading-relaxed",children:a.text}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-dashed border-border/50",children:[(0,b.jsxs)("span",{className:"text-[10px] text-muted-foreground font-medium",children:[a.createdBy," • ",new Date(a.createdAt).toLocaleString(),a.updatedAt&&" (edited)"]}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)(g.Button,{size:"icon",variant:"ghost",className:"h-5 w-5 hover:bg-muted",onClick:()=>{E(a.id),G(a.text)},children:(0,b.jsx)(p,{className:"h-3 w-3 text-muted-foreground"})}),(0,b.jsx)(g.Button,{size:"icon",variant:"ghost",className:"h-5 w-5 hover:bg-destructive/10 hover:text-destructive",onClick:()=>{var b;return b=a.id,void z(H.id,b)},children:(0,b.jsx)(q.Trash2,{className:"h-3 w-3"})})]})]})]})},a.id))}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 pt-2",children:[(0,b.jsx)(j.Textarea,{placeholder:"Type a new remark here...",value:B,onChange:a=>C(a.target.value),className:"min-h-[80px] bg-background text-sm resize-none focus-visible:ring-1"}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)(g.Button,{onClick:()=>{B.trim()&&(x(H.id,{text:B,createdAt:new Date().toISOString(),createdBy:"Admin"}),C(""))},disabled:!B.trim(),size:"sm",className:"px-4",children:[(0,b.jsx)(o,{className:"h-3 w-3 mr-1.5"})," Add Remark"]})})]})]})]}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary/80 font-medium pb-2 border-b border-border/50",children:[(0,b.jsx)(n,{className:"h-4 w-4"}),(0,b.jsx)("h3",{children:"Activity Log"})]}),(0,b.jsxs)("div",{className:"relative pl-2",children:[(0,b.jsx)("div",{className:"absolute left-[11px] top-2 bottom-2 w-px bg-border/60"}),(0,b.jsx)("div",{className:"space-y-6",children:H.activityLog.slice().reverse().map(a=>(0,b.jsxs)("div",{className:"relative pl-8",children:[(0,b.jsx)("div",{className:"absolute left-0 top-1 w-6 h-6 rounded-full bg-background border border-border flex items-center justify-center z-10",children:(0,b.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-start w-full gap-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:a.action}),(0,b.jsx)(g.Button,{size:"icon",variant:"ghost",className:"h-4 w-4 text-muted-foreground hover:text-destructive -mt-1",onClick:()=>A(H.id,a.id),children:(0,b.jsx)(q.Trash2,{className:"h-3 w-3"})})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:a.details}),(0,b.jsxs)("p",{className:"text-[10px] text-muted-foreground mt-1 font-mono opacity-70",children:[new Date(a.timestamp).toLocaleString()," • ",a.user]})]})]},a.id))})]})]})]}),(0,b.jsx)("div",{className:"p-4 border-t border-border bg-card z-10 flex justify-end",children:(0,b.jsx)(g.Button,{onClick:s,className:"px-8",children:"Update"})})]})})}function t(a,b){let c=a.filter(a=>"protect"===a.type),d=a.filter(a=>"settlement"===a.type),e={"0-30":0,"31-60":0,"61-90":0,"91-180":0,"180+":0};c.forEach(a=>{e[a.dpdGroup]++});let f=new Map,g=new Date;for(let a=29;a>=0;a--){let b=new Date(g);b.setDate(b.getDate()-a);let c=b.toISOString().split("T")[0];f.set(c,{count:0,protect:0,settlement:0})}a.forEach(a=>{let b=a.formFilledDate.split("T")[0];if(f.has(b)){let c=f.get(b);c.count++,"protect"===a.type?c.protect++:c.settlement++}});let h=0,i=new Date;i.setHours(0,0,0,0);let j=i.toISOString().split("T")[0];return a.forEach(a=>{let b=a.lastPaymentDate;if((!b||b===j)&&("protect"===a.type&&a.emiDate&&a.emiDate!==j?b=a.emiDate:"settlement"===a.type&&a.dueDate&&a.dueDate!==j&&(b=a.dueDate)),b){let a=new Date(b);!isNaN(a.getTime())&&(a.setHours(0,0,0,0),Math.floor((i.getTime()-a.getTime())/864e5)>=90&&h++)}}),{totalRequests:a.length,totalProtect:c.length,totalSettlement:d.length,sayyamProtect:c.filter(a=>"sayyam"===a.partner.toLowerCase()).length,sayyamSettlement:d.filter(a=>"sayyam"===a.partner.toLowerCase()).length,snapmintProtect:c.filter(a=>"snapmint"===a.partner.toLowerCase()).length,snapmintSettlement:d.filter(a=>"snapmint"===a.partner.toLowerCase()).length,dpdDistribution:Object.entries(e).map(([a,b])=>({group:a,count:b})),dailyRequests:Array.from(f.entries()).map(([a,b])=>({date:a,...b})),recentUploads:b.slice(0,5),newRequestsToday:a.filter(a=>a.formFilledDate.startsWith(new Date().toISOString().split("T")[0])).length,casesNPAToday:h}}a.s(["RecordDetailModal",()=>s],49439),a.s(["calculateDashboardStats",()=>t,"sampleNexusRecords",0,[{id:"n1",type:"nexus",nexusPurchaseDate:"2024-11-15",formFilledDate:"",userId:"user_12345",name:"Aarav Patel",mobileNumber:"9876543210",email:"aarav.patel@example.com",status:"new",partner:"other",stage:"Onboarding",uploadedFrom:"nexus_batch_nov.csv",uploadedAt:"2024-11-20T10:00:00Z",remarks:[],activityLog:[{id:"a_n1",action:"Record Created",details:"Imported from nexus_batch_nov.csv",timestamp:"2024-11-20T10:00:00Z",user:"System"}]},{id:"n2",type:"nexus",nexusPurchaseDate:"2024-10-05",formFilledDate:"2024-10-08",userId:"user_67890",name:"Ishaan Gupta",mobileNumber:"9123456789",email:"ishaan.g@example.com",status:"in-progress",partner:"other",stage:"Verification",uploadedFrom:"nexus_batch_oct.csv",uploadedAt:"2024-10-08T14:15:00Z",remarks:[{id:"r_n1",text:"User requested callback",createdAt:"2024-10-10T11:00:00Z",createdBy:"Support"}],activityLog:[{id:"a_n2",action:"Record Created",details:"Imported from nexus_batch_oct.csv",timestamp:"2024-10-08T14:15:00Z",user:"System"}]},{id:"n3",type:"nexus",nexusPurchaseDate:"2024-12-01",formFilledDate:"2024-12-02",userId:"user_54321",name:"Zara Khan",mobileNumber:"9988776655",email:"zara.k@example.com",status:"closed",partner:"other",stage:"Completed",uploadedFrom:"nexus_batch_dec.csv",uploadedAt:"2024-12-02T09:30:00Z",remarks:[],activityLog:[{id:"a_n3",action:"Record Created",details:"Imported from nexus_batch_dec.csv",timestamp:"2024-12-02T09:30:00Z",user:"System"}]}],"sampleProtectRecords",0,[{id:"p1",type:"protect",partner:"sayyam",nexusPurchaseDate:"2024-10-15",formFilledDate:"2024-10-20",name:"Rahul Sharma",mobileNumber:"9876543210",plan:"Premium",institution:"HDFC Bank",accountNumber:"XXXX1234",accountType:"Savings",dateOpened:"2022-05-10",emiDate:"2024-11-05",emiAmount:15e3,dpd:45,currentDpd:52,dpdGroup:"31-60",status:"in-progress",stage:"Documentation",uploadedFrom:"batch_oct_2024.xlsx",uploadedAt:"2024-10-20T10:30:00Z",remarks:[{id:"r1",text:"Customer contacted, willing to settle",createdAt:"2024-10-25T14:00:00Z",createdBy:"Admin"}],activityLog:[{id:"a1",action:"Record Created",details:"Imported from batch_oct_2024.xlsx",timestamp:"2024-10-20T10:30:00Z",user:"System"}]},{id:"p2",type:"protect",partner:"snapmint",nexusPurchaseDate:"2024-09-22",formFilledDate:"2024-09-25",name:"Priya Patel",mobileNumber:"9988776655",plan:"Basic",institution:"ICICI Bank",accountNumber:"XXXX5678",accountType:"Current",dateOpened:"2021-03-15",emiDate:"2024-10-10",emiAmount:8500,dpd:25,currentDpd:28,dpdGroup:"0-30",status:"new",stage:"Initial Review",uploadedFrom:"sept_batch.csv",uploadedAt:"2024-09-25T09:15:00Z",remarks:[],activityLog:[{id:"a2",action:"Record Created",details:"Imported from sept_batch.csv",timestamp:"2024-09-25T09:15:00Z",user:"System"}]},{id:"p3",type:"protect",partner:"sayyam",nexusPurchaseDate:"2024-08-10",formFilledDate:"2024-08-15",name:"Amit Kumar",mobileNumber:"9123456780",plan:"Gold",institution:"Axis Bank",accountNumber:"XXXX9012",accountType:"Savings",dateOpened:"2020-11-20",emiDate:"2024-09-01",emiAmount:22e3,dpd:95,currentDpd:102,dpdGroup:"91-180",status:"follow-up",stage:"Negotiation",uploadedFrom:"aug_data.xlsx",uploadedAt:"2024-08-15T11:45:00Z",remarks:[{id:"r2",text:"Customer requested extension",createdAt:"2024-09-10T16:30:00Z",createdBy:"Admin"},{id:"r3",text:"Follow-up scheduled for next week",createdAt:"2024-10-01T10:00:00Z",createdBy:"Admin"}],activityLog:[{id:"a3",action:"Record Created",details:"Imported from aug_data.xlsx",timestamp:"2024-08-15T11:45:00Z",user:"System"},{id:"a4",action:"Status Changed",details:"Status updated to follow-up",timestamp:"2024-09-15T14:20:00Z",user:"Admin"}]},{id:"p4",type:"protect",partner:"snapmint",nexusPurchaseDate:"2024-07-05",formFilledDate:"2024-07-10",name:"Sneha Gupta",mobileNumber:"9876123450",plan:"Premium",institution:"SBI",accountNumber:"XXXX3456",accountType:"Savings",dateOpened:"2019-08-25",emiDate:"2024-08-15",emiAmount:12e3,dpd:120,currentDpd:135,dpdGroup:"91-180",status:"closed",stage:"Resolved",uploadedFrom:"july_protect.xlsx",uploadedAt:"2024-07-10T08:00:00Z",remarks:[{id:"r4",text:"Settlement completed successfully",createdAt:"2024-10-15T12:00:00Z",createdBy:"Admin"}],activityLog:[{id:"a5",action:"Record Created",details:"Imported from july_protect.xlsx",timestamp:"2024-07-10T08:00:00Z",user:"System"},{id:"a6",action:"Status Changed",details:"Status updated to closed",timestamp:"2024-10-15T12:00:00Z",user:"Admin"}]},{id:"p5",type:"protect",partner:"sayyam",nexusPurchaseDate:"2024-11-01",formFilledDate:"2024-11-05",name:"Vikram Singh",mobileNumber:"9654321098",plan:"Basic",institution:"Kotak Bank",accountNumber:"XXXX7890",accountType:"Current",dateOpened:"2023-01-10",emiDate:"2024-11-20",emiAmount:18500,dpd:15,currentDpd:18,dpdGroup:"0-30",status:"new",stage:"Initial Review",uploadedFrom:"nov_batch.xlsx",uploadedAt:"2024-11-05T15:30:00Z",remarks:[],activityLog:[{id:"a7",action:"Record Created",details:"Imported from nov_batch.xlsx",timestamp:"2024-11-05T15:30:00Z",user:"System"}]}],"sampleSettlementRecords",0,[{id:"s1",type:"settlement",partner:"sayyam",nexusPurchaseDate:"2024-10-01",formFilledDate:"2024-10-05",name:"Anita Desai",mobileNumber:"9876509876",lenderName:"HDFC Credit Cards",creditCardNo:"XXXX-XXXX-XXXX-4521",loanAccNo:"CC123456789",dueAmt:85e3,dueDate:"2024-10-30",isEmiBounced:!0,isLegalNotice:!1,currEmployment:"Private Sector",recommendedAmt:51e3,customerWishAmt:45e3,status:"in-progress",stage:"Negotiation",uploadedFrom:"oct_settlements.xlsx",uploadedAt:"2024-10-05T12:00:00Z",remarks:[{id:"r5",text:"Lender agreed to 60% settlement",createdAt:"2024-10-20T11:30:00Z",createdBy:"Admin"}],activityLog:[{id:"a8",action:"Record Created",details:"Imported from oct_settlements.xlsx",timestamp:"2024-10-05T12:00:00Z",user:"System"}]},{id:"s2",type:"settlement",partner:"snapmint",nexusPurchaseDate:"2024-09-15",formFilledDate:"2024-09-18",name:"Rajesh Verma",mobileNumber:"9123098765",lenderName:"Bajaj Finance",creditCardNo:"",loanAccNo:"BFL987654321",dueAmt:125e3,dueDate:"2024-09-25",isEmiBounced:!0,isLegalNotice:!0,currEmployment:"Self Employed",recommendedAmt:75e3,customerWishAmt:62500,status:"follow-up",stage:"Legal Review",uploadedFrom:"sept_settlements.csv",uploadedAt:"2024-09-18T14:30:00Z",remarks:[{id:"r6",text:"Legal notice received, need urgent attention",createdAt:"2024-09-25T09:00:00Z",createdBy:"Admin"},{id:"r7",text:"Customer consulting with lawyer",createdAt:"2024-10-05T16:00:00Z",createdBy:"Admin"}],activityLog:[{id:"a9",action:"Record Created",details:"Imported from sept_settlements.csv",timestamp:"2024-09-18T14:30:00Z",user:"System"},{id:"a10",action:"Status Changed",details:"Status updated to follow-up",timestamp:"2024-09-25T09:00:00Z",user:"Admin"}]},{id:"s3",type:"settlement",partner:"sayyam",nexusPurchaseDate:"2024-08-20",formFilledDate:"2024-08-22",name:"Meera Joshi",mobileNumber:"9988112233",lenderName:"ICICI Personal Loan",creditCardNo:"",loanAccNo:"PL456789012",dueAmt:2e5,dueDate:"2024-08-31",isEmiBounced:!1,isLegalNotice:!1,currEmployment:"Government",recommendedAmt:14e4,customerWishAmt:12e4,status:"closed",stage:"Resolved",uploadedFrom:"aug_settlements.xlsx",uploadedAt:"2024-08-22T10:15:00Z",remarks:[{id:"r8",text:"Settlement completed at 65%",createdAt:"2024-10-10T14:00:00Z",createdBy:"Admin"}],activityLog:[{id:"a11",action:"Record Created",details:"Imported from aug_settlements.xlsx",timestamp:"2024-08-22T10:15:00Z",user:"System"},{id:"a12",action:"Status Changed",details:"Status updated to closed",timestamp:"2024-10-10T14:00:00Z",user:"Admin"}]},{id:"s4",type:"settlement",partner:"snapmint",nexusPurchaseDate:"2024-11-10",formFilledDate:"2024-11-12",name:"Karan Malhotra",mobileNumber:"9876001234",lenderName:"Axis Credit Card",creditCardNo:"XXXX-XXXX-XXXX-7890",loanAccNo:"AX789012345",dueAmt:55e3,dueDate:"2024-11-25",isEmiBounced:!1,isLegalNotice:!1,currEmployment:"Private Sector",recommendedAmt:38500,customerWishAmt:33e3,status:"new",stage:"Initial Review",uploadedFrom:"nov_settlements.xlsx",uploadedAt:"2024-11-12T16:45:00Z",remarks:[],activityLog:[{id:"a13",action:"Record Created",details:"Imported from nov_settlements.xlsx",timestamp:"2024-11-12T16:45:00Z",user:"System"}]}]],43118)}];

//# sourceMappingURL=_889c451c._.js.map